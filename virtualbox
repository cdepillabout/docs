
# on arch linux:
# - Run "vbox_build_module" as root every time your kernel is upgraded, to
#   compile the module for the new kernel version.
# - Add your user to the vboxusers group:
#      gpasswd -a USERNAME vboxusers


# load the module
modprobe vboxdrv

# You must load vboxnetflt for Host Interface Networking:
modprobe vboxnetflt

# You must load vboxnetadp for Host-Only networking:
modprobe vboxnetadp


# start headless from the console
VBoxManage startvm <vm name> -type vrdp

# give a .vdi hard drive file a new UUID 
# (used after cp'ing an existing .vdi file)
VBoxManage internalcommands sethduuid <hard_drive_name.vdi>

# another way to clone a hard drive (not sure how this works exactly)
# both of these should be the same
VBoxManage clonehd ....
VBoxManage clonevdi SOURCE.vdi NEWCOPY.vdi


# Opening ports on the virtual machine when connnecting over NAT
# This example shows how to open the ssh port.
VBoxManage setextradata "Linux Guest" "VBoxInternal/Devices/pcnet/0/LUN#0/Config/guestssh/Protocol" TCP
VBoxManage setextradata "Linux Guest" "VBoxInternal/Devices/pcnet/0/LUN#0/Config/guestssh/GuestPort" 22
VBoxManage setextradata "Linux Guest" "VBoxInternal/Devices/pcnet/0/LUN#0/Config/guestssh/HostPort" 2222
# The above example assumes a PCNet virtual network card; if you have
# configured the guest to use the Intel PRO/1000, replace "pcnet" with
# "e1000" in the above commands and use "virtio-net" if you configured the
# guest to use the Paravirtualized Network device. Similarly, if you want
# to configure a different interface instance replace the /0/ with the
# appropriate index. pcnet, e1000 and virtio-net are counted separately
# in this respect, and counting starts at 0 for these types.

# The name guestssh is an arbitrary one chosen for this particular
# forwarding configuration. With that configuration in place, all TCP
# connections to port 2222 on the host will be forwarded to port 22
# on the guest. Protocol can be either of TCP or UDP (these are case
# insensitive). To remove a mapping again, use the same commands, but
# leaving out the values (in this case TCP, 22 and 2222).
